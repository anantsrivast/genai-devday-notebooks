{
  "name": "GenAI Jupyter Notebooks with MongoDB",
  "dockerComposeFile": "docker-compose.yml",
  "service": "lab-runner",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  "forwardPorts": [
    8888,
    27017
  ],

  "hostRequirements": {
    "cpus": 4
  },

  "containerEnv": {
    "PROXY_ENDPOINT": "https://vtqjvgchmwcjwsrela2oyhlegu0hwqnw.lambda-url.us-west-2.on.aws/",
    "MONGODB_URI": "mongodb://admin:mongodb@mongodb:27017/"
  },

  /* ✅ Dev Container Feature installs git as root */
  "features": {
    "ghcr.io/devcontainers/features/git:1": {}
  },

  /* ✅ Only Python deps at creation time */
  "postCreateCommand": "pip install -r requirements.txt",

  /* ✅ Stay non-root for dev work */
  "remoteUser": "jovyan",

  "customizations": {
    "codespaces": {
      "openFiles": []
    },
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-toolsai.jupyter",
        "mongodb.mongodb-vscode"
      ]
    }
  }
}
